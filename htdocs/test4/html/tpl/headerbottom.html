<div class="bottom">
    <!-- меню -->
    <div id="pageContent" style="margin: 10px auto 10px auto">
        <main-menu :items="menuItems" :active="currentMenu"></main-menu>
        <!-- 
    <div class="grid_main_menu">
        <div v-for="(item, index) in menuItems" @click.stop="selectSubMenu(item)" :class="[{active: currentMenu === item.id}, 'menu'+index]">{{item.title}}</div>
    </div>
<component v-show="activeSubMenu" :is="currentMenuComponent"></component>
<component v-show="activePage" :is="currentPageComponent" class="page"></component>
-->
    </div>

    <!--

                    <li><span id="news" class="nav-link dropdown-toggle" onmousedown="goToLocation('news')">НОВОСТИ</span></li>
                    <a class="nav-link dropdown-toggle" href="#" onmousedown="goToLocation('news')" id="navbarDropdown1" role="button" data-bs-toggle="dropdown" aria-expanded="false">НОВОСТИ</a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a href="/ru/pages/Archive_news/">Архив новостей</a>
       
                        </li>
                    </ul>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" onmousedown="goToLocation('about')" id="navbarDropdown2" role="button" data-bs-toggle="dropdown" aria-expanded="false">О БИБЛИОТЕКЕ</a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
     
                    </ul>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/ru/pages/service/">УСЛУГИ</a>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="/ru/pages/fonds/" id="navbarDropdown3" role="button" data-bs-toggle="dropdown" aria-expanded="false">ФОНДЫ</a>
                    
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="/ru/pages/catalogs/" id="navbarDropdown4" role="button" data-bs-toggle="dropdown" aria-expanded="false">КАТАЛОГИ</a>
                    
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="/ru/pages/eresorses/" id="navbarDropdown5" role="button" data-bs-toggle="dropdown" aria-expanded="false">ЭЛЕКТРОННЫЕ РЕСУРСЫ</a>
                    
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/ru/pages/contacts/">КОНТАКТЫ</a>
                </li>
            </ul>
-->
</div>

<script>
    Vue.component("tab-about", {
        template: `<div class = "grid_sub_menu">
          <div v-for = "(it, ind) in subMenu"
               :class.stop = "'subMenu' + 1 + ind"
               @click = "currentPageName(it.ref)"
          ><span class="item"
                :class = "{errors: !it.ref}"
            >{{it.name}}</span>
          </div>
        </div>
        `,
        data() {
            return {
                subMenu: [{
                    name: 'История',
                    ref: 'history'
                }, {
                    name: 'Адрес и время работы',
                    ref: 'address'
                }, {
                    name: '3D панорамы Галерея',
                    ref: ''
                }, {
                    name: 'Противодействие коррупции',
                    ref: ''
                }, {
                    name: 'Структура библиотеки, контакты',
                    ref: 'structure'
                }, {
                    name: 'Реквизиты библиотеки',
                    ref: 'requisites'
                }, {
                    name: 'Официальные документы',
                    ref: 'norm'
                }, {
                    name: 'Попечительский совет',
                    ref: 'about'
                }]
            }
        },
        methods: {
            currentPageName: function(p) {
                menu.$data.currentPage = p ? p : 'patch';
                menu.$data.activePage = true;
                infor.style.display = 'none';
                console.log(menu.$data.currentPage);
            },
        },
    });
    Vue.component("tab-readers", {
        template: `<div class = "grid_sub_menu">
          <div v-for = "(it, ind) in subMenu"
               :class.stop = "'subMenu' + 1 + ind"
               @click = "currentPageName(it.ref)"
          ><span class="item"
          :class = "{errors: !it.ref}"
          >{{it.name}}</span>
          </div>
        </div>
        `,
        data() {
            return {
                subMenu: [{
                    name: 'Запись читателей',
                    ref: 'readers'
                }, {
                    name: 'Услуги, правила пользования',
                    ref: ''
                }, {
                    name: 'Фонды, ресурсы, каталоги',
                    ref: ''
                }, {
                    name: 'Доступная среда',
                    ref: ''
                }, {
                    name: 'Мероприятия и экскурсии',
                    ref: ''
                }, {
                    name: 'Клубы и объединения',
                    ref: ''
                }, {
                    name: 'Учёба в РГБИ',
                    ref: ''
                }, {
                    name: 'Творческое развитие',
                    ref: ''
                }]
            }
        },
        methods: {
            currentPageName: function(p) {
                menu.$data.currentPage = p ? p : 'patch';
                menu.$data.activePage = true;
                infor.style.display = 'none';
                console.log(menu.$data.currentPage);
            },
        },
    });
    Vue.component("tab-colleagues", {
        template: `<div class = "grid_sub_menu">
          <div v-for = "(it, ind) in subMenu"
               :class.stop = "'subMenu' + 1 + ind"
               @click = "currentPageName(it.ref)"
          ><span class="item"
          :class = "{errors: !it.ref}"
          >{{it.name}}</span>
          </div>
        </div>
        `,
        data() {
            return {
                subMenu: [{
                    name: 'Конференции, семинары',
                    ref: ''
                }, {
                    name: 'Методические документы',
                    ref: ''
                }, {
                    name: 'Проекты библиотеки',
                    ref: ''
                }, {
                    name: 'Издания РГБИ',
                    ref: ''
                }, {
                    name: 'Библиотека благодарит',
                    ref: ''
                }, {
                    name: 'Творческие конкурсы',
                    ref: ''
                }, {
                    name: 'Вакансии',
                    ref: ''
                }, {
                    name: 'Секция библиотек по искуству и музейных библиотек РБА',
                    ref: ''
                }]
            }
        },
        methods: {
            currentPageName: function(p) {
                menu.$data.currentPage = p ? p : 'patch';
                menu.$data.activePage = true;
                infor.style.display = 'none';
                console.log(menu.$data.currentPage);
            },
        }
    });
    Vue.component("tab-ask", {
        template: `<div class = "grid_sub_menu">
          <div v-for = "(it, ind) in subMenu"
               :class = "'subMenu' + 1 + ind"
               @click.stop = "currentPageName(it.ref)"
          ><span class="item"
          :class = "{errors: !it.ref}"
          >{{it.name}}</span>
          </div>
        </div>
        `,
        data() {
            return {
                subMenu: [{
                    name: ' ',
                    ref: ''
                }, {
                    name: 'Тематические запросы',
                    ref: ''
                }, {
                    name: 'Наличие изданий',
                    ref: ''
                }, {
                    name: 'Задать вопрос',
                    ref: ''
                }, {
                    name: 'Отзывы и предложения',
                    ref: ''
                }, {
                    name: 'Вне категорий',
                    ref: ''
                }, {
                    name: 'Вопросы о работе РГБИ',
                    ref: ''
                }, {
                    name: '  ',
                    ref: ''
                }]
            }
        },
        methods: {
            currentPageName: function(p) {
                menu.$data.currentPage = p ? p : 'patch';
                menu.$data.activePage = true;
                infor.style.display = 'none';
                console.log(menu.$data.currentPage);
            },
        }
    });

    Vue.component('main-menu', {
        props: ['items', 'active'],
        template: `<div class="grid_main_menu">
            <div v-for="(item, index) in items" @click.stop="selectSubMenu(item.link)" :class="[{active: active === item.link}, 'menu'+index]">{{item.title}}</div>
            </div>`,
        methods: {
            selectSubMenu: function(i) {
                console.log(i, this.$root.currentMenu);
                /*   if (!this.$root.activeSubMenu) this.$root.activeSubMenu = true
                   else this.$root.activeSubMenu = false;
                */
                this.$root.currentMenu = i;
            },
        },
    });

    var menu = new Vue({
        el: '#pageContent',
        data: {
            activeSubMenu: false,
            activePage: false,
            currentPage: 'patch',
            currentMenu: 'about',
            menuItems: [{
                title: 'О библиотеке',
                link: 'about'
            }, {
                title: 'Читателям',
                link: 'readers'
            }, {
                title: 'Коллегам',
                link: 'colleagues'
            }, {
                title: 'Спроси библиографа',
                link: 'ask'
            }]
        },

        methods: {
            /*
               mainMenuClass(index) {
                    //console.log(index);
                return "main" + this.menuItems[index].id;
                },

                currentPageName: function(p) {
                    this.currentPage = p? p : 'patch';
                    console.log(this.currentPage);
                },

                currentPageComponent: function() {
                      console.log(this.currentPage);
                         console.log("page-" + this.currentPage.toLowerCase());
                return "page-" + this.currentPage.toLowerCase();
                },
            */
        },
        computed: {
            currentPageComponent: function() {
                return "page-" + this.currentPage.toLowerCase();
            },

            currentMenuComponent: function() {
                return "tab-" + this.currentMenu.toLowerCase();
            },
        },

    });
</script>